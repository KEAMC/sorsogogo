<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="src/output.css">
  <title>More Details</title>
</head>
<body class="font-montserrat">
  
  <main class="flex flex-col items-center">

    <h1 id="shop-name" class="bg-lincoln-green w-full text-white text-4xl text-center py-10 font-bold mb-4">Mai Cafe</h1>

    <div id="imageContainer" class="flex flex-wrap gap-2 justify-center items-center">
      <!-- Images will be dynamically inserted here -->
    </div>

    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden">
      <div class="relative">
        <img id="modalImage" class="max-w-full max-h-screen rounded-lg cursor-grab">
        <button id="closeModal" class="absolute top-2 right-2 text-white bg-red-500 hover:bg-red-600 rounded-full w-8 h-8 flex items-center justify-center">
          &times;
        </button>
      </div>
    </div>

    <a id="map-link" href="" target="_blank" class="w-40 text-center text-dark-green bg-golden-yellow py-2 px-3 font-bold rounded-md mt-4 mb-4 hover:bg-[#FFA500] hover:text-white">GO</a>

  </main>

  <footer class="bg-dark-green text-white py-4">
    <div class="container mx-auto text-center">
      <p class="text-sm">&copy; 2024 Student Project. All Rights Reserved.</p>
    </div>
  </footer>

  <!-- Modal -->

  <script>
    const shops = [
    { 
      id: 1,
      name: "Piaman's Collection",
      category: 'botique', 
      thumbnail: 'img/thumbnail/piamans.jpg', 
      mapLink: 'https://maps.app.goo.gl/5KHdZGVxZSEeFGyK9',
      images: [
        'img/piamans_collection/img1.jpg',
        'img/piamans_collection/img2.jpg',
        'img/piamans_collection/img3.jpg',
        'img/piamans_collection/img4.jpg',
        'img/piamans_collection/img5.jpg',
      ] 
    },
    { 
      id: 2,
      name: "Robin's Closet Fashion Boutique",
      category: 'botique', 
      thumbnail: 'img/thumbnail/robins.jpg', 
      mapLink: 'https://maps.app.goo.gl/8QvPe3YSMtNPqURGA',
      images: [
        'img/robins_fashion_botique/img1.jpg',
        'img/robins_fashion_botique/img2.jpg',
        'img/robins_fashion_botique/img3.jpg',
        'img/robins_fashion_botique/img4.jpg'
      ] 
    },
    { 
      id: 3,
      name: "KKOPI",
      category: 'cafe', 
      thumbnail: 'img/thumbnail/kkopi.jpg', 
      mapLink: 'https://maps.app.goo.gl/fYt1tXX32kN9GiSA9',
      images: [
        'img/kkopi/img1.jpg',
        'img/kkopi/img2.jpg',
        'img/kkopi/img3.jpg',
        'img/kkopi/img4.jpg',
        'img/kkopi/img5.jpg',
      ]
    },
    { 
      id: 4,
      name: "The Chancery",
      category: 'cafe', 
      thumbnail: 'img/thumbnail/chancery.jpg', 
      mapLink: 'https://maps.app.goo.gl/HTLmngvZ37sV73Cz9',
      images: [
        'img/the_chancery/img1.jpg',
        'img/the_chancery/img2.jpg',
        'img/the_chancery/img3.jpg',
        'img/the_chancery/img4.jpg',
        'img/the_chancery/img5.jpg',
        'img/the_chancery/img6.jpg',
      ]
    },
    { 
      id: 5,
      name: "Mai CafÃ©",
      category: 'cafe', 
      thumbnail: 'img/thumbnail/mai.jpg', 
      mapLink: 'https://maps.app.goo.gl/4kp2soHwg4HfLhjs7',
      images: [
        'img/mai_cafe/img1.jpg',
        'img/mai_cafe/img2.jpg',
        'img/mai_cafe/img3.jpg',
        'img/mai_cafe/img4.jpg',
        'img/mai_cafe/img5.jpg',
      ] 
    },
    { 
      id: 6,
      name: "Lagamayo Electronics",
      category: 'electronics', 
      thumbnail: 'img/thumbnail/lagamayo.jpg', 
      mapLink: 'https://maps.app.goo.gl/6jyWyMXcedCdvSWL8',
      images: [
        'img/lagamayo_electronics/img1.jpg',
        'img/lagamayo_electronics/img2.jpg',
      ]
    },
     { 
      id: 7,
      name: "Flowers con Dahon",
      category: 'flowershop', 
      thumbnail: 'img/thumbnail/condahon.jpg', 
      mapLink: 'https://maps.app.goo.gl/Gxrj8LWbtkFGPDAh7',
      images: [
        'img/flowers_con_dahon/img1.jpg',
        'img/flowers_con_dahon/img2.jpg',
        'img/flowers_con_dahon/img3.jpg',
        'img/flowers_con_dahon/img4.jpg',
      ]
    },
     { 
      id: 8,
      name: "Kazundra Flower Shop",
      category: 'flowershop', 
      thumbnail: 'img/thumbnail/kazundra.jpg', 
      mapLink: 'https://maps.app.goo.gl/kFD45N2SUQUUTeg9A',
      images: [
        'img/kazundra_flower_shop/img1.jpg',
        'img/kazundra_flower_shop/img2.jpg',
      ]
    },
     { 
      id: 9,
      name: "UNA Pizzeria",
      category: 'restaurant', 
      thumbnail: 'img/thumbnail/una.jpg', 
      mapLink: 'https://maps.app.goo.gl/aBJty8EQt79sDPgW7',
      images: [
        'img/una_pizzeria/img1.jpg',
        'img/una_pizzeria/img2.jpg',
        'img/una_pizzeria/img3.jpg',
        'img/una_pizzeria/img4.jpg',
        'img/una_pizzeria/img5.jpg',
      ]
    },
     { 
      id: 10,
      name: "Mike & Gerry",
      category: 'restaurant', 
      thumbnail: 'img/thumbnail/mike.jpg', 
      mapLink: 'https://maps.app.goo.gl/TdLrs96RxbVKhrEw6',
      images: [
        'img/mike_gerry/img1.jpg',
        'img/mike_gerry/img2.jpg',
        'img/mike_gerry/img3.jpg',
      ]
    },
     { 
      id: 11,
      name: "Jane's Fastfood",
      category: 'restaurant', 
      thumbnail: 'img/thumbnail/janes.jpg', 
      mapLink: 'https://maps.app.goo.gl/ZJfQnooVyq8QmC436',
      images: [
        'img/janes_fastfood/img1.jpg',
        'img/janes_fastfood/img2.jpg',
      ]
    },
    { 
      id: 12,
      name: "The Goodluck Store",
      category: 'shoppingmall', 
      thumbnail: 'img/thumbnail/goodluck.jpg', 
      mapLink: 'https://maps.app.goo.gl/2GkkSRHKymGs1LWQ7',
      images: [
        'img/the_goodluck_store/img1.jpg',
        'img/the_goodluck_store/img2.jpg',
      ]
    },
    { 
      id: 13,
      name: "Jeannes Supermarket",
      category: 'shoppingmall', 
      thumbnail: 'img/thumbnail/jeannes.jpg', 
      mapLink: 'https://maps.app.goo.gl/xYq88kqCB9niSJYXA',
      images: [
        'img/jeannes_supermarket/img1.jpg',
        'img/jeannes_supermarket/img2.jpg',
      ]
    },
  ]

    const imageContainer = document.getElementById('imageContainer');
    const imageModal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const closeModal = document.getElementById('closeModal');

    const urlParams = new URLSearchParams(window.location.search);
    const id = parseInt(urlParams.get("id"), 10);

    // Find the shop by id
    const shop = shops.find((shop) => shop.id === id);

    // Display shop details
    if (shop) {
      document.getElementById('shop-name').textContent = shop.name;
      document.getElementById('map-link').href = shop.mapLink;

      // Display images
      shop.images.forEach(imageSrc => {
        const imgElement = document.createElement('img');
        imgElement.src = imageSrc;
        imgElement.alt = `${shop.name} Image`;
        imgElement.className = "w-full min-h-[490px] lg:max-h-[490px] lg:min-w-96 object-cover sm:w-2/3 md:w-2/5 lg:w-3/12 rounded-lg shadow-sm shadow-gray-400 hover:shadow-lg transition-shadow duration-300 cursor-pointer";

        imgElement.addEventListener('click', () => {
          modalImage.src = imageSrc;
          scale = 1;
          translateX = 0;
          translateY = 0;
          updateTransform();
          imageModal.classList.remove('hidden');
        });

        imageContainer.appendChild(imgElement);
      });
    } else {
      document.body.innerHTML = `<h1>Shop not found</h1>`;
    }
    

    let scale = 1;
    const ZOOM_STEP = 0.1;
    const MAX_SCALE = 3;
    const MIN_SCALE = 1;

    let isDragging = false;
    let startX, startY;
    let translateX = 0, translateY = 0;

    // shops.forEach(shop => {
    //   shop.images.forEach(imageSrc => {
    //     const imgElement = document.createElement('img');
    //     imgElement.src = imageSrc;
    //     imgElement.alt = `${shop.name} Image`;
    //     imgElement.className = "w-full min-h-[490px] lg:max-h-[490px] object-cover sm:w-2/3 md:w-2/5 lg:w-3/12 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 cursor-pointer";

    //     imgElement.addEventListener('click', () => {
    //       modalImage.src = imageSrc;
    //       scale = 1;
    //       translateX = 0;
    //       translateY = 0;
    //       updateTransform();
    //       imageModal.classList.remove('hidden');
    //     });

    //     imageContainer.appendChild(imgElement);
    //   });
    // });

    closeModal.addEventListener('click', () => {
      imageModal.classList.add('hidden');
    });

    imageModal.addEventListener('click', (e) => {
      if (e.target === imageModal) {
        imageModal.classList.add('hidden');
      }
    });

    modalImage.addEventListener('wheel', (event) => {
      event.preventDefault();

      const rect = modalImage.getBoundingClientRect();
      const mouseX = event.clientX - rect.left;
      const mouseY = event.clientY - rect.top;

      const offsetX = (mouseX - rect.width / 2) / scale;
      const offsetY = (mouseY - rect.height / 2) / scale;

      if (event.deltaY < 0) {
        if (scale < MAX_SCALE) {
          scale += ZOOM_STEP;
          translateX -= offsetX * ZOOM_STEP;
          translateY -= offsetY * ZOOM_STEP;
        }
      } else {
        if (scale > MIN_SCALE) {
          scale -= ZOOM_STEP;
          translateX += offsetX * ZOOM_STEP;
          translateY += offsetY * ZOOM_STEP;
        }
      }

      updateTransform();
    });

    modalImage.addEventListener('mousedown', (event) => {
      isDragging = true;
      startX = event.clientX - translateX;
      startY = event.clientY - translateY;
      modalImage.style.cursor = 'grabbing';
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      modalImage.style.cursor = 'grab';
    });

    document.addEventListener('mousemove', (event) => {
      if (isDragging) {
        translateX = event.clientX - startX;
        translateY = event.clientY - startY;
        updateTransform();
      }
    });

    function updateTransform() {
      modalImage.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
    }
  </script>
</body>

</html>